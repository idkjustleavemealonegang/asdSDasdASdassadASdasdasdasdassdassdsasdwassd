<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Menu System</title>
  <style>
    :root{
      --sel-bg: #d400ff8a;
      --sel-border: 1px solid #d400ff;
      --li-pad-y: 4px;
      --li-pad-x: 8px;
      --icon-size: 16px;
    }

    body{
      background:transparent;            /* black background */
      margin:0;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:flex-start; /* keep menu left */
      font-family:sans-serif;
      user-select:none;           /* prevent highlight */
    }

    .menu-wrapper{
      position:relative;
      display:inline-block;
      margin-left:40px; /* left offset */
    }

    .side-indicator-track{
      position:absolute;
      left:-16px;
      top:0;
      height:0;
      width:10px;
      background:rgba(0,0,0,.7);
      border-radius:12px;
      box-shadow:inset 0 0 6px rgba(0,0,0,.9);
      pointer-events:none;
    }

    .side-indicator{
      position:absolute;
      left:-14px;
      width:6px;
      height:20px;
      background:#c300ffbe;
      border-radius:10px;
      box-shadow:0 0 6px #ff00c8, 0 0 12px #f800ec8e;
      transition:top .18s ease;
      pointer-events:none;
    }

    .menu{
      width:320px;
      border-radius:4px;
      overflow:hidden;
      background:#000000dc;
      color:#fff;
      outline:none;
      position:relative;
    }

    .menu-header{
      background:#000;
      padding:0;
    }
    .menu-header img{
      width:100%;
      display:block;
    }

    .menu-pill-container{
      background:#000;
      padding:1.5px;
      border-bottom:1px solid rgba(255,255,255,.15);
      text-align:center;
    }

    .menu-pill{
      font-size:13px;
      font-weight:700;
      letter-spacing:1px;
    }

    .menu-list, .submenu{
      list-style:none;
      margin:0;
      padding:0;
      position:relative;
    }

    .menu-list li, .submenu li{
      padding:var(--li-pad-y) var(--li-pad-x);
      display:flex;
      align-items:center;
      gap:8px;
      justify-content:space-between;
      pointer-events:none; /* keyboard-only; hover doesn't change size */
      font-size:13px;
    }

    .menu-list li.selected, .submenu li.selected{
      background:var(--sel-bg);
      border:var(--sel-border);
      border-radius:8px;
      box-shadow:0 0 3px #d000fa, 0 0 1px #d400ff;
    }

    .left-content{
      display:flex;
      align-items:center;
      gap:8px;
      font-weight:600;
    }

    .arrow{
      font-size:17px;
      opacity:0.7;
    }

    .menu-list li svg.lucide, .submenu li svg.lucide{
      width:var(--icon-size)!important;
      height:var(--icon-size)!important;
      flex-shrink:0;
      color:#fff;
      stroke:currentColor;
      stroke-width:1.75;
    }

    .menu-footer{
      background:#000;
      border-top:1px solid rgba(255,255,255,.15);
      border-radius:0 0 4px 4px;
      padding:8px;
      font-size:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .menu-footer .right{
      opacity:.8;
      font-style:italic;
    }

    .submenu{ display:none; }

    .switch{
      width:38px;
      height:20px;
      background:#cc00ff44;
      border:1px solid #ffffff;
      border-radius:999px;
      position:relative;
      flex-shrink:0;
      margin-left:auto;
    }
    .switch .knob{
      position:absolute;
      top:50%;
      left:2px;
      width:16px;
      height:16px;
      transform:translateY(-50%);
      background:#fff;
      border-radius:50%;
      display:grid;
      place-items:center;
      transition:left .18s ease;
    }
    .switch .mark{ font-size:12px; line-height:1; color:#000; }
    .switch[data-state="on"]{ background:#ff00ea; border-color:#ffffff; }
    .switch[data-state="on"] .knob{ left:20px; }
    .switch[data-state="on"] .mark{ display:none; }

    .submenu .section{
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      font-weight:600;
      opacity:0.8;
      margin:6px 0;
    }
    .submenu .section::before,
    .submenu .section::after{
      content:"";
      flex:1;
      border-bottom:1px solid rgba(255,255,255,0.2);
      margin:0 6px;
    }

    .revive-btn, .feature-btn{
      background:transparent;
      padding:4px 10px;
      border-radius:6px;
      font-size:12px;
      font-weight:600;
      text-align:left;
      flex:1;
    }

    /* Notifications */
    .notification-container{
      position:fixed;
      top:50%;
      right:20px;
      transform:translateY(-50%);
      display:flex;
      flex-direction:column;
      gap:8px;
      z-index:9999;
    }
    .notification{
      background: linear-gradient(90deg,#6a00ff,#b300ff); /* purple gradient */
      color:#fff;
      padding:12px 20px;
      border-radius:10px;
      box-shadow:0 0 12px rgba(0,0,0,0.8);
      font-size:15px;
      font-weight:700;
      opacity:0;
      transform:translateX(120%);
      transition:all 0.3s ease;
    }
    .notification.error{
      background: linear-gradient(90deg,#ff0033,#ff5555); /* red for not found */
    }
    .notification.show{
      opacity:1;
      transform:translateX(0);
    }

    /* === Bottom-center "Find Feature" box (smaller, black background, bold smaller text) === */
    .finder {
      position: fixed;
      left: 50%;
      bottom: 11%;
      transform: translateX(-50%);
      width: min(50vw, 700px);  /* smaller */
      min-width: 420px;
      display: none;            /* shown on demand */
      z-index: 10000;
      text-align: left;
    }
    .finder .panel{
      background: rgba(0,0,0,0.95);   /* black background */
      border-radius: 10px;
      padding: 10px 14px 16px;
    }
    .finder .label {
      font-size: 14px;
      color: #ddd;
      margin-left: 6px;
      text-transform: lowercase;
    }
    .finder .line {
      height: 3px;
      background: linear-gradient(90deg,#9c00ff,#d000ff);
      margin: 6px 0 8px;
      width: 100%;
    }
    .finder input {
      width: 100%;
      background: transparent;
      border: none;          /* no border */
      outline: none;
      color: #fff;
      font-weight: 700;      /* bold typing */
      font-size: 20px;       /* smaller text */
      text-align: center;
      letter-spacing: .3px;
    }
    .finder input::placeholder { color:#ffffff; opacity:.95; }
  </style>
</head>
<body>
  <div class="menu-wrapper">
    <div class="side-indicator-track" id="track"></div>
    <div class="side-indicator" id="capsule"></div>
    <div class="menu" tabindex="0" id="menu">
      <div class="menu-header">
        <img src="https://i.ibb.co/4Rz2SXM/LOGO.png" alt="Header">
      </div>
      <div class="menu-pill-container"><div class="menu-pill" id="section-title">HOME</div></div>

      <!-- HOME MENU -->
      <ul class="menu-list" id="main-menu">
        <li><div class="left-content"><i data-lucide="user"></i> Self</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="wifi"></i> Online</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="crosshair"></i> Combat/Weapon</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="eye"></i> Visual</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="car"></i> Vehicle</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="puzzle"></i> Miscellaneous</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="flame"></i> Destructive</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="zap"></i> Triggers</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="settings"></i> Settings</div><span class="arrow">»</span></li>
        <li><div class="left-content"><i data-lucide="search"></i> Find Feature</div><span class="arrow">»</span></li>
      </ul>

      <!-- SELF SUBMENU -->
      <ul class="submenu" id="self-submenu">
        <li class="section">Movement</li>
        <li><span class="left-content">Noclip</span><div class="switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li><span class="left-content">Godmode</span><div class="switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li><span class="left-content">Infinite Stamina</span><div class="switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li class="section">Modifications</li>
        <li><span class="left-content">Super Jump</span><div class="switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li><span class="left-content">Fast Run</span><div class="switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li class="section">Actions</li>
        <li><div class="revive-btn">Revive</div></li>
      </ul>

      <!-- ONLINE MENU -->
      <ul class="submenu" id="online-submenu">
        <li><div class="left-content">List</div><span class="arrow">»</span></li>
        <li><div class="left-content">Features</div><span class="arrow">»</span></li>
      </ul>

      <!-- ONLINE > LIST -->
      <ul class="submenu" id="online-list-submenu">
        <li><span class="left-content">Select Everyone</span><div class="switch" data-role="select-all" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li><span class="left-content">Unselect Everyone</span><div class="switch" data-role="unselect-all" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li class="section">Players</li>
        <li><span class="left-content">Player1</span><div class="switch player-switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li><span class="left-content">Player2</span><div class="switch player-switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
      </ul>

      <!-- ONLINE > FEATURES -->
      <ul class="submenu" id="online-features-submenu">
        <li><div class="feature-btn">Teleport to Player</div></li>
        <li><span class="left-content">Spectate</span><div class="switch" data-state="off"><div class="knob"><span class="mark">✕</span></div></div></li>
        <li class="section">Appearance</li>
        <li><div class="feature-btn">Copy Clothing</div></li>
        <li><div class="feature-btn">Copy Appearance</div></li>
      </ul>

      <!-- SETTINGS SUBMENU -->
      <ul class="submenu" id="settings-submenu">
        <li class="section">Colors</li>
        <li><div class="feature-btn" data-color="blue">Blue</div></li>
        <li><div class="feature-btn" data-color="red">Red</div></li>
        <li><div class="feature-btn" data-color="green">Green</div></li>
        <li><div class="feature-btn" data-color="orange">Orange</div></li>
        <li><div class="feature-btn" data-color="restore">Restore</div></li>
      </ul>

      <div class="menu-footer">
        <span>sheisty - beta</span>
        <span class="right" id="footer-count">1/10</span>
      </div>
    </div>
  </div>

  <!-- Finder Box (shows when user presses Enter on "Find Feature") -->
  <div class="finder" id="finder">
    <div class="panel">
      <div class="label">find feature</div>
      <div class="line"></div>
      <input id="finder-input" placeholder="type here..." />
    </div>
  </div>

  <!-- Notifications -->
  <div class="notification-container" id="notifications"></div>

  <script src="https://unpkg.com/lucide@0.441.0/dist/umd/lucide.min.js"></script>
  <script>
    window.onload = () => {
      lucide.createIcons();

      const menuEl = document.getElementById('menu');
      const track = document.getElementById('track');
      const capsule = document.getElementById('capsule');
      const footerCount = document.getElementById('footer-count');
      const sectionTitle = document.getElementById('section-title');
      const mainMenu = document.getElementById('main-menu');
      const selfSubmenu = document.getElementById('self-submenu');
      const onlineSubmenu = document.getElementById('online-submenu');
      const onlineListSubmenu = document.getElementById('online-list-submenu');
      const onlineFeaturesSubmenu = document.getElementById('online-features-submenu');
      const settingsSubmenu = document.getElementById('settings-submenu');
      const notifications = document.getElementById('notifications');

      const finder = document.getElementById('finder');
      const finderInput = document.getElementById('finder-input');

      const ALL_MENUS = [mainMenu,selfSubmenu,onlineSubmenu,onlineListSubmenu,onlineFeaturesSubmenu,settingsSubmenu];

      let currentMenu = mainMenu;
      let items = [...currentMenu.querySelectorAll('li')];
      let index = 0;

      // remember cursor per menu
      const lastIndexById = {};
      // manual stack for back navigation (fixes "stuck" bug)
      const menuStack = [];

      /* THEME (settings) */
      function setTheme(color){
        const root = document.documentElement.style;
        const map = {
          blue:  ['#0078ff66','1px solid #2aa0ff'],
          red:   ['#ff004466','1px solid #ff4b6a'],
          green: ['#12b88666','1px solid #2bd97f'],
          orange:['#ff7f0066','1px solid #ffae42']
        };
        const d = map[color];
        if(!d){ // restore
          root.removeProperty('--sel-bg');
          root.removeProperty('--sel-border');
          showNotification('Colors restored');
          return;
        }
        root.setProperty('--sel-bg', d[0]);
        root.setProperty('--sel-border', d[1]);
        showNotification(`Color set: ${color}`);
      }

      function showNotification(msg, isError=false){
        const note = document.createElement('div');
        note.className = 'notification' + (isError ? ' error' : '');
        note.textContent = msg;
        notifications.appendChild(note);
        requestAnimationFrame(()=> note.classList.add('show'));
        setTimeout(()=>{
          note.classList.remove('show');
          setTimeout(()=> note.remove(), 300);
        }, 2000);
      }

      function setMenuVisible(menu, vis){ menu.style.display = vis ? 'block' : 'none'; }

      function updateTrack(){
        track.style.top = currentMenu.offsetTop + "px";
        track.style.height = currentMenu.offsetHeight + "px";
      }
      function updateCapsule(){
        const li = items[index];
        const top = currentMenu.offsetTop + li.offsetTop + (li.offsetHeight - capsule.offsetHeight)/2;
        capsule.style.top = top + 'px';
      }
      function updateSelection(){
        items.forEach(li => li.classList.remove('selected'));
        if(items[index]) items[index].classList.add('selected');
        footerCount.textContent = `${index + 1}/${items.length}`;
        updateTrack();
        updateCapsule();
      }

      function openOnly(menu){
        ALL_MENUS.forEach(m => setMenuVisible(m,false));
        setMenuVisible(menu,true);
      }

      function openSubmenu(menu, title){
        // remember current index before leaving
        lastIndexById[currentMenu.id] = index;
        menuStack.push(currentMenu);

        openOnly(menu);
        currentMenu = menu;
        items = [...currentMenu.querySelectorAll('li')].filter(li => !li.classList.contains('section'));
        index = lastIndexById[menu.id] || 0;
        sectionTitle.textContent = title;
        updateSelection();
      }

      function goBack(){
        if(menuStack.length === 0) return;
        // remember where we were in this menu
        lastIndexById[currentMenu.id] = index;

        const prev = menuStack.pop();
        openOnly(prev);
        currentMenu = prev;
        items = [...currentMenu.querySelectorAll('li')].filter(li => !li.classList.contains('section'));
        index = lastIndexById[prev.id] || 0;

        // set title based on which menu we returned to
        let title = 'HOME';
        if(prev === selfSubmenu) title = 'SELF';
        else if(prev === onlineSubmenu) title = 'ONLINE';
        else if(prev === onlineListSubmenu) title = 'ONLINE > LIST';
        else if(prev === onlineFeaturesSubmenu) title = 'ONLINE > FEATURES';
        else if(prev === settingsSubmenu) title = 'SETTINGS';

        sectionTitle.textContent = title;
        updateSelection();
      }

      function toggleSwitch(li){
        const sw = li.querySelector('.switch');
        if(!sw) return;
        const on = sw.getAttribute('data-state') === 'on';
        sw.setAttribute('data-state', on ? 'off' : 'on');

        // Handle special cases
        if(sw.dataset.role === "select-all"){
          document.querySelectorAll('.player-switch').forEach(ps => ps.setAttribute('data-state','on'));
          showNotification("All players selected");
        }
        if(sw.dataset.role === "unselect-all"){
          document.querySelectorAll('.player-switch').forEach(ps => ps.setAttribute('data-state','off'));
          showNotification("All players unselected");
        }
      }

      function pressButton(li){
        const btn = li.querySelector('.revive-btn, .feature-btn');
        if(btn){
          showNotification("Executed");
        }
      }

      function handleEnter(){
        const li = items[index];
        const label = li?.innerText?.trim().toLowerCase() || '';

        if(currentMenu === mainMenu){
          if(label.startsWith('self')) openSubmenu(selfSubmenu,"SELF");
          else if(label.startsWith('online')) openSubmenu(onlineSubmenu,"ONLINE");
          else if(label.startsWith('settings')) openSubmenu(settingsSubmenu,"SETTINGS");
          else if(label.startsWith('find feature')){
            openFinder();
          }
        } else if(currentMenu === onlineSubmenu){
          if(label.startsWith('list')) openSubmenu(onlineListSubmenu,"ONLINE > LIST");
          else if(label.startsWith('features')) openSubmenu(onlineFeaturesSubmenu,"ONLINE > FEATURES");
        } else if(currentMenu === settingsSubmenu){
          // color buttons
          if(li.querySelector('.feature-btn')){
            const c = li.querySelector('.feature-btn').dataset.color;
            if(c === 'restore') setTheme('restore');
            else setTheme(c);
          }
        } else {
          if(li.querySelector('.switch')) toggleSwitch(li);
          else if(li.querySelector('.revive-btn') || li.querySelector('.feature-btn')) pressButton(li);
        }
      }

      /* ===== Finder ===== */
      function openFinder(){
        finder.style.display = 'block';
        finderInput.value = '';
        finderInput.focus();
      }
      function closeFinder(){
        finder.style.display = 'none';
        menuEl.focus();
      }

      function getMenuTitleFor(menu){
        if(menu === mainMenu) return 'HOME';
        if(menu === selfSubmenu) return 'SELF';
        if(menu === onlineSubmenu) return 'ONLINE';
        if(menu === onlineListSubmenu) return 'ONLINE > LIST';
        if(menu === onlineFeaturesSubmenu) return 'ONLINE > FEATURES';
        if(menu === settingsSubmenu) return 'SETTINGS';
        return '';
      }

      function goToLi(targetLi){
        // find which UL holds this li
        const parent = targetLi.closest('ul');
        // build the path to open
        if(parent === mainMenu){
          openOnly(mainMenu);
          currentMenu = mainMenu;
          items = [...currentMenu.querySelectorAll('li')];
          index = items.indexOf(targetLi);
          sectionTitle.textContent = 'HOME';
          updateSelection();
          return;
        }
        if(parent === selfSubmenu){
          // from main -> self
          menuStack.length = 0; // reset stack to avoid weird states
          openSubmenu(selfSubmenu,'SELF');
        } else if(parent === onlineSubmenu){
          menuStack.length = 0;
          openSubmenu(onlineSubmenu,'ONLINE');
        } else if(parent === onlineListSubmenu){
          menuStack.length = 0;
          openSubmenu(onlineSubmenu,'ONLINE'); // open parent first
          openSubmenu(onlineListSubmenu,'ONLINE > LIST');
        } else if(parent === onlineFeaturesSubmenu){
          menuStack.length = 0;
          openSubmenu(onlineSubmenu,'ONLINE'); // open parent first
          openSubmenu(onlineFeaturesSubmenu,'ONLINE > FEATURES');
        } else if(parent === settingsSubmenu){
          menuStack.length = 0;
          openSubmenu(settingsSubmenu,'SETTINGS');
        }
        // select the li
        items = [...currentMenu.querySelectorAll('li')].filter(li => !li.classList.contains('section'));
        index = items.indexOf(targetLi);
        if(index < 0) index = 0;
        updateSelection();

        // path notice
        showNotification(getMenuTitleFor(currentMenu), false);
      }

      function searchAndJump(q){
        const query = q.trim().toLowerCase();
        if(!query){
          showNotification('feature not found', true);
          return;
        }
        // scan all actionable lis (exclude .section)
        const allLis = ALL_MENUS.flatMap(ul => [...ul.querySelectorAll('li')].filter(li => !li.classList.contains('section')));
        const hit = allLis.find(li => li.innerText.trim().toLowerCase().includes(query));
        if(!hit){
          showNotification('feature not found', true);
          return;
        }
        goToLi(hit);
        closeFinder();
        // also show exact LOCATION string like SECTION > SECTION
        const parent = hit.closest('ul');
        showNotification(getMenuTitleFor(parent));
      }

      /* ====== Keyboard ====== */
      document.addEventListener('keydown', e => {
        // Finder open state has priority
        if(finder.style.display === 'block'){
          if(e.key === 'Escape'){ // close finder with Esc
            closeFinder();
            e.preventDefault();
          } else if(e.key === 'Enter'){
            searchAndJump(finderInput.value);
            e.preventDefault();
          }
          return;
        }

        if(e.key === 'ArrowDown'){
          index = (index + 1) % items.length;
          updateSelection();
          e.preventDefault();
        } else if(e.key === 'ArrowUp'){
          index = (index - 1 + items.length) % items.length;
          updateSelection();
          e.preventDefault();
        } else if(e.key === 'Enter'){
          handleEnter(); // Enter selects or opens finder (when "Find Feature" is selected)
          e.preventDefault();
        } else if(e.key === 'Backspace'){
          // back out of submenus (fixed so Online sub-submenus return to Online)
          goBack();
          e.preventDefault();
        }
      });

      function init(){
        // show only main on load
        openOnly(mainMenu);
        currentMenu = mainMenu;
        items = [...currentMenu.querySelectorAll('li')];
        index = 0;
        sectionTitle.textContent = 'HOME';
        menuEl.focus();
        updateSelection();
      }
      window.addEventListener('resize', updateSelection);
      init();
    };
  </script>
</body>
</html>
